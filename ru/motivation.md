# Почему Zephir?

Сегодня PHP приложения должны сбалансировать ряд проблем, в том числе стабильности, производительности и функциональности. Каждое РНР приложение основано на наборе общих компонентов, которые также являются базой для большинства приложений.

Эти общие компоненты библиотек/фреймворков или их сочетание. После установки фреймворки меняются редко, являясь основой приложения они должны быть очень функциональным, а также очень быстрыми.

Получение быстрых и надежных библиотек может быть затруднено из-за высоких уровней абстракции, которые, как правило, реализуются в них. Учитывая условие, что базовые библиотеки или фреймворки меняются редко, есть возможность создавать расширения, которые обеспечивают эту функциональность используя компиляцию для улучшение производительности и использования ресурсов.

С Zephir, вы можете реализовать объектно-ориентированные библиотеки/фреймворки/приложения, которые могут быть использованы в PHP, экономя важные секунды, которые могут сделать ваше приложение быстрее, улучшая его потребительские свойства.

<a name='if-you-are-a-php-programmer'></a>

## Если вы PHP программист...

PHP является одним из самых популярных языков, используемых для разработки веб-приложений. Динамически типизированные и интерпретируемые языки, как PHP предлагают очень высокую скорость разработки благодаря их гибкости.

Начиная с версии 4, а затем 5, PHP основан на реализации движка Zend Engine. Это виртуальная машина, которая выполняет PHP код из представления в байт-коде. Zend Engine практически присутствует в каждой установке PHP в мире. С Zephir, вы можете создавать расширения для PHP, работающих под Zend Engine.

Zephir основывается на PHP, поэтому они, очевидно, имеют много общего, однако; они имеют существенные различия, которые придают Zephir свою собственную индивидуальность. Например, Zephir является более строгим, и это может быть сделать вас менее производительным по сравнению с PHP из-за шага компиляции.

<a name='if-you-are-a-c-programmer'></a>

## Если вы Си программист...

Язык программирования Си является одним из самых мощных и популярных языков когда-либо созданных. На самом деле, PHP написан на Си, это является одной из причин, почему расширения PHP доступны для него. Си дает вам свободу для управления памятью, использования типы низкого уровня и даже встроенные ассемблерные процедуры.

Тем не менее, разработка больших приложений на Си может занять гораздо больше времени, чем ожидалось, по сравнению с PHP или Zephir и некоторые ошибки может быть сложно найти, если вы не являетесь опытным разработчиком.

Zephir был разработан, чтобы быть безопасным, поэтому он не реализует указатели или ручное управление памятью, так что если вы программируете на Си, вы будете чувствовать, что Zephir менее мощный, но более дружественным, чем Си.

<a name='compilation-vs-interpretation'></a>

## Компиляция против интерпретации

Компиляция обычно замедляет разработку; вам потребуется немного больше терпения, чтобы компилировать ваш код перед его запуском. Соответственно, интерпретация ведет к снижению производительности в пользу скорости разработки. В некоторых случаях, не существует какой-либо заметной разницы между скоростью интерпретируемого и скомпилированного кода.

Zephir требует компиляции кода, однако, его функциональность используется с PHP, который интерпретируется.

После компиляции кода не нужно делать ее снова. Однако, интерпретируемый код интерпретируется каждый раз, когда он запускается. Разработчик может решить, какие части приложения должны быть написаны на Zephir и какие нет.

<a name='statically-typed-versus-dynamically-typed-languages'></a>

## Статическая типизация против динамической типизации

Вообще говоря, в статически типизированном языке, переменная связана с конкретным типом всю свою жизнь. Её тип не может быть изменен, и он может ссылаться только на типо-совместимые экземпляры и операции. Языки, типа C/C ++ были реализованы со схемой:

    int a = 0;
    a = "hello"; // не позволяется
    

В динамической типизации, тип связан со значением, а не переменной. Таким образом, переменная может ссылаться на тип значения, а затем переназначить позже на значение несвязанного типа. Языки типа Javascript или PHP являются примерами динамического типизированного языка:

    var a = 0;
    a = "hello"; // позволяется
    

Несмотря на свои преимущества производительности, динамические языки могут быть не лучший выбор для всех приложений, в частности, для очень больших проектов и высокопроизводительных приложений.

Оптимизация производительности динамического языка, такого как PHP, более сложна, чем для статического языка, такого как Си. В статическом языке оптимизаторы могут использовать информацию типов для принятия решений. В динамическом языке для оптимизатора доступно меньше таких ключей, что затрудняет выбор вариантов оптимизации.

Хотя последние достижения в оптимизации динамических языков являются многообещающими (например, компиляция JIT), они отстают от уровня техники для статических языков. Таким образом, если вам требуется очень высокая производительность, статические языки, вероятно, более безопасный выбор.

Еще одно небольшое преимущество статических языков - дополнительная проверка компилятора. Компилятор не может найти логические ошибки, которые намного важнее, но компилятор может заранее обнаружить ошибки, которые в динамическом языке могут быть найдены только во время выполнения.

Zephir is both statically and dynamically typed, allowing you to take advantage of both approaches where possible.

<a name='compilation-scheme'></a>

## Compilation Scheme

Zephir offers native code generation (currently via compilation to C). A compiler like gcc/clang/vc++ optimizes and compiles the code down to machine code. The following graph shows how the process works:

![compilation scheme](/images/content/scheme.png)

In addition to the ones provided by Zephir, over time, compilers have implemented and matured a number of optimizations that improve the performance of compiled applications:

* [GCC optimizations](http://gcc.gnu.org/onlinedocs/gcc-4.1.0/gcc/Optimize-Options.html)
* [LLVM passes](http://llvm.org/docs/Passes.html)
* [Visual C/C++ optimizations](http://msdn.microsoft.com/en-us/library/k1ack8f1.aspx)

<a name='code-protection'></a>

## Code Protection

In some circumstances, the compilation does not significantly improve performance. This may be because the bottleneck is located in the I/O bound portion(s) of the application (quite likely) rather than compute/memory bound. However, compiling code could also bring some level of intellectual protection to your application. With Zephir, producing native binaries, you also get the ability to "hide" the original code to users or customers.

<a name='conclusion'></a>

## Conclusion

Zephir was not created to replace PHP or C. Instead, we think it is a complement to them, allowing PHP developers to venture into code compilation and static typing. Zephir is an attempt to join good things from the C and PHP worlds, looking for opportunities to make applications faster.